-- =====================================================
-- DATOS DE PRUEBA PARA EL SISTEMA DE ALMACÉN
-- =====================================================
-- Este script inserta datos de ejemplo para probar
-- todas las funcionalidades del sistema
-- =====================================================

-- Limpiar datos existentes (solo para desarrollo)
-- TRUNCATE TABLE audit_logs, notifications, adjustment_items, adjustments, 
-- transfer_items, transfers, movement_items, movements, purchase_order_items, 
-- purchase_orders, product_suppliers, inventory, product_lots, products, 
-- suppliers, locations, warehouses, categories, users CASCADE;

-- =====================================================
-- USUARIOS
-- =====================================================

INSERT INTO users (id, email, name, role, is_active) VALUES
('00000000-0000-0000-0000-000000000001', 'admin@almacen.com', 'Administrador Sistema', 'admin', true),
('00000000-0000-0000-0000-000000000002', 'gerente@almacen.com', 'María García', 'manager', true),
('00000000-0000-0000-0000-000000000003', 'operador@almacen.com', 'Juan Pérez', 'operator', true),
('00000000-0000-0000-0000-000000000004', 'compras@almacen.com', 'Ana López', 'manager', true);

-- =====================================================
-- ALMACENES Y UBICACIONES
-- =====================================================

INSERT INTO warehouses (id, code, name, address, city, state, manager_id, capacity_m3) VALUES
('10000000-0000-0000-0000-000000000001', 'ALM-01', 'Almacén Central', 'Av. Industrial 123', 'Monterrey', 'Nuevo León', '00000000-0000-0000-0000-000000000002', 5000.00),
('10000000-0000-0000-0000-000000000002', 'ALM-02', 'Almacén Norte', 'Calle Norte 456', 'Guadalajara', 'Jalisco', '00000000-0000-0000-0000-000000000002', 3000.00),
('10000000-0000-0000-0000-000000000003', 'ALM-03', 'Almacén Sur', 'Av. Sur 789', 'Ciudad de México', 'CDMX', '00000000-0000-0000-0000-000000000002', 4000.00);

-- Ubicaciones para Almacén Central
INSERT INTO locations (id, warehouse_id, code, name, type) VALUES
('20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', 'Z-A', 'Zona A', 'zone'),
('20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000001', 'Z-B', 'Zona B', 'zone'),
('20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000001', 'A-01', 'Pasillo A-01', 'aisle'),
('20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000001', 'A-02', 'Pasillo A-02', 'aisle'),
('20000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000001', 'A01-R01', 'Rack A01-R01', 'rack'),
('20000000-0000-0000-0000-000000000006', '10000000-0000-0000-0000-000000000001', 'A01-R02', 'Rack A01-R02', 'rack');

-- =====================================================
-- CATEGORÍAS
-- =====================================================

INSERT INTO categories (id, name, description, icon) VALUES
('30000000-0000-0000-0000-000000000001', 'Electrónica', 'Productos electrónicos y tecnología', 'Laptop'),
('30000000-0000-0000-0000-000000000002', 'Alimentos', 'Productos alimenticios', 'Apple'),
('30000000-0000-0000-0000-000000000003', 'Bebidas', 'Bebidas y líquidos', 'Coffee'),
('30000000-0000-0000-0000-000000000004', 'Oficina', 'Material de oficina', 'FileText'),
('30000000-0000-0000-0000-000000000005', 'Limpieza', 'Productos de limpieza', 'Sparkles');

-- Subcategorías
INSERT INTO categories (id, name, description, parent_category_id) VALUES
('30000000-0000-0000-0000-000000000011', 'Computadoras', 'Laptops y desktops', '30000000-0000-0000-0000-000000000001'),
('30000000-0000-0000-0000-000000000012', 'Accesorios', 'Accesorios electrónicos', '30000000-0000-0000-0000-000000000001'),
('30000000-0000-0000-0000-000000000021', 'Lácteos', 'Productos lácteos', '30000000-0000-0000-0000-000000000002'),
('30000000-0000-0000-0000-000000000022', 'Granos', 'Granos y cereales', '30000000-0000-0000-0000-000000000002');

-- =====================================================
-- PROVEEDORES
-- =====================================================

INSERT INTO suppliers (id, code, business_name, trade_name, tax_id, email, phone, address, city, state, business_type, payment_terms_days, rating) VALUES
('40000000-0000-0000-0000-000000000001', 'PROV-001', 'Tecnología Avanzada S.A. de C.V.', 'TechAdvance', 'TAV850101ABC', 'ventas@techadvance.com', '8112345678', 'Av. Tecnológico 100', 'Monterrey', 'Nuevo León', 'Tecnología', 30, 4.5),
('40000000-0000-0000-0000-000000000002', 'PROV-002', 'Distribuidora de Alimentos del Norte', 'AlimNorte', 'DAN900202DEF', 'contacto@alimnorte.com', '3312345678', 'Calle Comercio 200', 'Guadalajara', 'Jalisco', 'Alimentos', 15, 4.8),
('40000000-0000-0000-0000-000000000003', 'PROV-003', 'Papelería y Oficina Total', 'OficiTotal', 'POT950303GHI', 'ventas@oficintotal.com', '5512345678', 'Av. Reforma 300', 'Ciudad de México', 'CDMX', 'Papelería', 30, 4.2),
('40000000-0000-0000-0000-000000000004', 'PROV-004', 'Productos de Limpieza Industriales', 'LimpiaMax', 'PLI980404JKL', 'info@limpiamax.com', '8187654321', 'Blvd. Industrial 400', 'Monterrey', 'Nuevo León', 'Limpieza', 45, 4.6);

-- =====================================================
-- PRODUCTOS
-- =====================================================

INSERT INTO products (id, sku, name, description, category_id, unit_id, type, barcode, min_stock, max_stock, cost_price, sale_price, is_active, created_by) VALUES
-- Electrónica
('50000000-0000-0000-0000-000000000001', 'LAPTOP-001', 'Laptop Dell Inspiron 15', 'Laptop Dell Inspiron 15, Intel i5, 8GB RAM, 256GB SSD', '30000000-0000-0000-0000-000000000011', (SELECT id FROM units WHERE code = 'UNIT'), 'finished_product', '7501234567890', 5, 50, 12000.00, 15000.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000002', 'MOUSE-001', 'Mouse Inalámbrico Logitech', 'Mouse inalámbrico Logitech M185', '30000000-0000-0000-0000-000000000012', (SELECT id FROM units WHERE code = 'UNIT'), 'finished_product', '7501234567891', 20, 200, 150.00, 250.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000003', 'TECLADO-001', 'Teclado Mecánico RGB', 'Teclado mecánico con iluminación RGB', '30000000-0000-0000-0000-000000000012', (SELECT id FROM units WHERE code = 'UNIT'), 'finished_product', '7501234567892', 15, 100, 800.00, 1200.00, true, '00000000-0000-0000-0000-000000000001'),

-- Alimentos
('50000000-0000-0000-0000-000000000004', 'LECHE-001', 'Leche Entera 1L', 'Leche entera pasteurizada 1 litro', '30000000-0000-0000-0000-000000000021', (SELECT id FROM units WHERE code = 'L'), 'finished_product', '7501234567893', 100, 500, 18.00, 25.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000005', 'ARROZ-001', 'Arroz Blanco 1kg', 'Arroz blanco grano largo 1kg', '30000000-0000-0000-0000-000000000022', (SELECT id FROM units WHERE code = 'KG'), 'finished_product', '7501234567894', 200, 1000, 22.00, 35.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000006', 'FRIJOL-001', 'Frijol Negro 1kg', 'Frijol negro 1kg', '30000000-0000-0000-0000-000000000022', (SELECT id FROM units WHERE code = 'KG'), 'finished_product', '7501234567895', 150, 800, 28.00, 42.00, true, '00000000-0000-0000-0000-000000000001'),

-- Bebidas
('50000000-0000-0000-0000-000000000007', 'AGUA-001', 'Agua Embotellada 1L', 'Agua purificada embotellada 1 litro', '30000000-0000-0000-0000-000000000003', (SELECT id FROM units WHERE code = 'L'), 'finished_product', '7501234567896', 300, 2000, 8.00, 15.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000008', 'REFRESCO-001', 'Refresco Cola 600ml', 'Refresco de cola 600ml', '30000000-0000-0000-0000-000000000003', (SELECT id FROM units WHERE code = 'ML'), 'finished_product', '7501234567897', 200, 1500, 12.00, 20.00, true, '00000000-0000-0000-0000-000000000001'),

-- Oficina
('50000000-0000-0000-0000-000000000009', 'PAPEL-001', 'Papel Bond Carta 500 hojas', 'Papel bond tamaño carta, paquete 500 hojas', '30000000-0000-0000-0000-000000000004', (SELECT id FROM units WHERE code = 'BOX'), 'consumable', '7501234567898', 50, 300, 85.00, 120.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000010', 'PLUMA-001', 'Pluma Azul', 'Pluma de tinta azul', '30000000-0000-0000-0000-000000000004', (SELECT id FROM units WHERE code = 'UNIT'), 'consumable', '7501234567899', 100, 500, 5.00, 10.00, true, '00000000-0000-0000-0000-000000000001'),

-- Limpieza
('50000000-0000-0000-0000-000000000011', 'DETERGENTE-001', 'Detergente Líquido 1L', 'Detergente líquido para ropa 1 litro', '30000000-0000-0000-0000-000000000005', (SELECT id FROM units WHERE code = 'L'), 'consumable', '7501234567900', 80, 400, 35.00, 55.00, true, '00000000-0000-0000-0000-000000000001'),
('50000000-0000-0000-0000-000000000012', 'CLORO-001', 'Cloro 1L', 'Cloro blanqueador 1 litro', '30000000-0000-0000-0000-000000000005', (SELECT id FROM units WHERE code = 'L'), 'consumable', '7501234567901', 60, 300, 18.00, 30.00, true, '00000000-0000-0000-0000-000000000001');

-- =====================================================
-- RELACIÓN PRODUCTO-PROVEEDOR
-- =====================================================

INSERT INTO product_suppliers (product_id, supplier_id, supplier_sku, cost_price, lead_time_days, is_preferred) VALUES
-- Electrónica con TechAdvance
('50000000-0000-0000-0000-000000000001', '40000000-0000-0000-0000-000000000001', 'DELL-INS15-I5', 12000.00, 7, true),
('50000000-0000-0000-0000-000000000002', '40000000-0000-0000-0000-000000000001', 'LOG-M185', 150.00, 3, true),
('50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000001', 'MECH-RGB-01', 800.00, 5, true),

-- Alimentos con AlimNorte
('50000000-0000-0000-0000-000000000004', '40000000-0000-0000-0000-000000000002', 'LECHE-ENT-1L', 18.00, 2, true),
('50000000-0000-0000-0000-000000000005', '40000000-0000-0000-0000-000000000002', 'ARROZ-BL-1K', 22.00, 3, true),
('50000000-0000-0000-0000-000000000006', '40000000-0000-0000-0000-000000000002', 'FRIJOL-NG-1K', 28.00, 3, true),
('50000000-0000-0000-0000-000000000007', '40000000-0000-0000-0000-000000000002', 'AGUA-PUR-1L', 8.00, 1, true),
('50000000-0000-0000-0000-000000000008', '40000000-0000-0000-0000-000000000002', 'REF-COLA-600', 12.00, 2, true),

-- Oficina con OficiTotal
('50000000-0000-0000-0000-000000000009', '40000000-0000-0000-0000-000000000003', 'PAPEL-BOND-500', 85.00, 5, true),
('50000000-0000-0000-0000-000000000010', '40000000-0000-0000-0000-000000000003', 'PLUMA-AZ-01', 5.00, 3, true),

-- Limpieza con LimpiaMax
('50000000-0000-0000-0000-000000000011', '40000000-0000-0000-0000-000000000004', 'DET-LIQ-1L', 35.00, 4, true),
('50000000-0000-0000-0000-000000000012', '40000000-0000-0000-0000-000000000004', 'CLORO-BL-1L', 18.00, 4, true);

-- =====================================================
-- INVENTARIO INICIAL
-- =====================================================

INSERT INTO inventory (product_id, warehouse_id, location_id, quantity_available) VALUES
-- Almacén Central
('50000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', 25),
('50000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', 150),
('50000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', 75),
('50000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 350),
('50000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 600),
('50000000-0000-0000-0000-000000000006', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 450),
('50000000-0000-0000-0000-000000000007', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 1200),
('50000000-0000-0000-0000-000000000008', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 800),
('50000000-0000-0000-0000-000000000009', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', 180),
('50000000-0000-0000-0000-000000000010', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', 350),
('50000000-0000-0000-0000-000000000011', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 220),
('50000000-0000-0000-0000-000000000012', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', 180),

-- Almacén Norte
('50000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000002', NULL, 15),
('50000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000002', NULL, 80),
('50000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000002', NULL, 200),
('50000000-0000-0000-0000-000000000007', '10000000-0000-0000-0000-000000000002', NULL, 600),

-- Almacén Sur
('50000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000003', NULL, 40),
('50000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000003', NULL, 400),
('50000000-0000-0000-0000-000000000009', '10000000-0000-0000-0000-000000000003', NULL, 120);

-- =====================================================
-- ÓRDENES DE COMPRA
-- =====================================================

INSERT INTO purchase_orders (id, order_number, supplier_id, warehouse_id, order_date, expected_delivery_date, status, subtotal, tax_amount, total_amount, payment_terms_days, payment_status, created_by) VALUES
('60000000-0000-0000-0000-000000000001', 'OC-2024-001', '40000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', '2024-01-15', '2024-01-22', 'received', 150000.00, 24000.00, 174000.00, 30, 'paid', '00000000-0000-0000-0000-000000000004'),
('60000000-0000-0000-0000-000000000002', '40000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000001', '2024-02-01', '2024-02-08', 'pending', 85000.00, 13600.00, 98600.00, 15, 'pending', '00000000-0000-0000-0000-000000000004'),
('60000000-0000-0000-0000-000000000003', 'OC-2024-003', '40000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000001', '2024-02-10', '2024-02-17', 'approved', 12500.00, 2000.00, 14500.00, 30, 'pending', '00000000-0000-0000-0000-000000000004');

-- Items de órdenes de compra
INSERT INTO purchase_order_items (purchase_order_id, product_id, quantity_ordered, quantity_received, unit_id, unit_price, line_total) VALUES
-- OC-2024-001
('60000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000001', 10, 10, (SELECT id FROM units WHERE code = 'UNIT'), 12000.00, 120000.00),
('60000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000002', 200, 200, (SELECT id FROM units WHERE code = 'UNIT'), 150.00, 30000.00),

-- OC-2024-002
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000004', 500, 0, (SELECT id FROM units WHERE code = 'L'), 18.00, 9000.00),
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000005', 1000, 0, (SELECT id FROM units WHERE code = 'KG'), 22.00, 22000.00),
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000007', 2000, 0, (SELECT id FROM units WHERE code = 'L'), 8.00, 16000.00),
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000008', 1500, 0, (SELECT id FROM units WHERE code = 'ML'), 12.00, 18000.00),
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000006', 500, 0, (SELECT id FROM units WHERE code = 'KG'), 28.00, 14000.00),
('60000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000011', 200, 0, (SELECT id FROM units WHERE code = 'L'), 35.00, 7000.00),

-- OC-2024-003
('60000000-0000-0000-0000-000000000003', '50000000-0000-0000-0000-000000000009', 100, 0, (SELECT id FROM units WHERE code = 'BOX'), 85.00, 8500.00),
('60000000-0000-0000-0000-000000000003', '50000000-0000-0000-0000-000000000010', 800, 0, (SELECT id FROM units WHERE code = 'UNIT'), 5.00, 4000.00);

-- =====================================================
-- MOVIMIENTOS
-- =====================================================

INSERT INTO movements (id, movement_number, type, warehouse_id, location_id, movement_date, status, reference_type, reference_number, created_by) VALUES
('70000000-0000-0000-0000-000000000001', 'MOV-2024-001', 'entry', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', '2024-01-22 10:30:00', 'completed', 'purchase_order', 'OC-2024-001', '00000000-0000-0000-0000-000000000003'),
('70000000-0000-0000-0000-000000000002', 'MOV-2024-002', 'exit', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000005', '2024-01-25 14:15:00', 'completed', 'sale_order', 'VTA-2024-001', '00000000-0000-0000-0000-000000000003'),
('70000000-0000-0000-0000-000000000003', 'MOV-2024-003', 'adjustment', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000006', '2024-02-01 09:00:00', 'completed', NULL, NULL, '00000000-0000-0000-0000-000000000002');

-- Items de movimientos
INSERT INTO movement_items (movement_id, product_id, quantity, unit_id, unit_cost, total_cost) VALUES
-- Entrada de OC-2024-001
('70000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000001', 10, (SELECT id FROM units WHERE code = 'UNIT'), 12000.00, 120000.00),
('70000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000002', 200, (SELECT id FROM units WHERE code = 'UNIT'), 150.00, 30000.00),

-- Salida por venta
('70000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000002', 50, (SELECT id FROM units WHERE code = 'UNIT'), 150.00, 7500.00),
('70000000-0000-0000-0000-000000000002', '50000000-0000-0000-0000-000000000003', 25, (SELECT id FROM units WHERE code = 'UNIT'), 800.00, 20000.00),

-- Ajuste de inventario
('70000000-0000-0000-0000-000000000003', '50000000-0000-0000-0000-000000000004', -50, (SELECT id FROM units WHERE code = 'L'), 18.00, -900.00);

-- =====================================================
-- FIN DE DATOS DE PRUEBA
-- =====================================================
